<div class="container">

    <div class="row col-md-12">
        <div ng-if="errorMessage != null">
            <div class="alert alert-danger">{{errorMessage}}</div>
        </div>

        <div class="page-header">
            <h3>Role {{role.roleName}} </h3>
        </div>
    </div>

    <div class="row col-md-12" ng-if="errorMessage == null">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading clearfix">
                    <h4 class="panel-title pull-left form-editable-heading">Permissions:</h4>

                    <div class="btn-group btn-group-sm pull-right" ng-hide="isAddingPermission || isRemovingPermission">
                        <button type="button" ng-show="shouldShowAddPermissionButton" class="btn btn-sm btn-success" ng-click="showAddPermission()">
                            <span class="glyphicon glyphicon-plus"></span> Add permission
                        </button>
                        <button type="button" ng-show="shouldShowDeletePermissionButton" class="btn btn-sm btn-danger" ng-click="showDeletePermission()">
                            Delete permission
                        </button>
                    </div>
                </div>
                <div class="panel-body">

                    <div class="form-group" ng-show="isAddingPermission">
                        <label for="permToAddSelect" class="col-md-4 control-label">Permission to add:</label>
                        <div class="col-md-8">
                            <select id="permToAddSelect" ng-model="permissionToAdd.permissionName"
                                    required
                                    ng-options="permission.permissionName as permission.permissionName for permission in permissionsToAdd">
                                <option value="">Choose permission</option>
                            </select>
                        </div>
                        <div class="btn-group btn-group-sm pull-right">
                            <button type="button" class="btn btn-sm btn-success" ng-click="addPermission()">
                                <span class="glyphicon glyphicon-plus"></span>
                                Add
                            </button>
                            <button type="button" class="btn btn-sm btn-default" ng-click="cancelAddPermission()">
                                Cancel
                            </button>
                        </div>
                    </div>

                    <div class="form-group" ng-show="isDeletingPermission">
                        <label for="permToDeleteSelect" class="col-md-4 control-label">Permission to delete:</label>
                        <div class="col-md-8">
                            <select id="permToDeleteSelect" ng-model="permissionToDelete.permissionName"
                                    required
                                    ng-options="permission.permissionName as permission.permissionName for permission in permissionsToDelete">
                                <option value="">Choose permission</option>
                            </select>
                        </div>
                        <div class="btn-group btn-group-sm pull-right">
                            <button type="button" class="btn btn-sm btn-danger" ng-click="deletePermission()">
                                Delete
                            </button>
                            <button type="button" class="btn btn-sm btn-default" ng-click="cancelDeletePermission()">
                                Cancel
                            </button>
                        </div>
                    </div>

                    <table class="table table-hover table-striped table-condensed">
                        <tbody>
                            <tr ng-repeat="permission in role.permissions">
                                <td>{{permission.permissionName}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
